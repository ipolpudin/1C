
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                        Хитрости
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
1) Если необходимо заблокировать доступность элемента с большой вариабельностью вкл/выкл доступности от значений формы. Можно программно создать группу и назначить ее родителем формы. 
А затем дописать функционл вкл/выкл доспупности этой группы.

2) Если необходимо заблокировать всю форму через БСП ЗапретРедактированияРеквизитовОбъектов, то можно создать группу маячек и блокировать ее, ЭтаФорма.ТолькоПросмотр = НЕ ГруппаМаячек.Доступность. Подробнее см. Запрет Редактирования

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

                                                                                                        				Создание частей формы

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                        РЕКВИЗИТ
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Заметки:{ 
В самый последний момент(ПослеЗаписиНаСервере) не резервирует ячейку под реквезит в БД. В функции ПослеЗаписиНаСервере(текущайОбъект) 
текущайОбъект не содержит этого реквезита, а в Объект есть этот реквезит. !!!Возможно из за определяемых типов которые нельзя исользовать в расширении
Заметки}

  	ДобавляемыеРеквизиты = Новый Массив;//Создается массив 
  
	НовыйРеквизит = Новый РеквизитФормы("эккоИдентификаторПериод",Новый ОписаниеТипов("Дата"));
	НовыйРеквизит.Заголовок = "Идентификатор период строкой";
	НовыйРеквизит.СохраняемыеДанные = Ложь;

	
	ДобавляемыеРеквизиты.Добавить(НовыйРеквизит);//Вносятся изменения в форму
        ИзменитьРеквизиты(ДобавляемыеРеквизиты);  

//Создание ТЗ
        МассивТипаВыбора = Новый Массив;
	МассивТипаВыбора.Добавить(Тип("ТаблицаЗначений"));
	ОписаниеТипаВыбора = Новый ОписаниеТипов(МассивТипаВыбора);
	ДобавляемыеРеквизиты.Добавить(Новый РеквизитФормы("ВТР_ТаблицаЭлементовКОбмену", ОписаниеТипаВыбора)); //ТЗ
	ДобавляемыеРеквизиты.Добавить(Новый РеквизитФормы("ВТР_МассивЭлементов", Новый ОписаниеТипов(),"ВТР_ТаблицаЭлементовКОбмену"));//Колонка с Произвольным типом

//Создание СписокЗначений
	//Отлично работает с обычными массивами. Например как буфер(Есть выгрузка/загрузка массива)
	ВТР_СписокЭлементовКОбмену = Новый РеквизитФормы("ВТР_СписокЭлементовКОбмену", Новый ОписаниеТипов("СписокЗначений")); 
	ДобавляемыеРеквизиты.Добавить(ВТР_СписокЭлементовКОбмену);
	ИзменитьРеквизиты(ДобавляемыеРеквизиты); 

  //ЭтотОбъект["эккоИдентификаторПериод"]; - обращение к программно созданному реквезиту

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                               ЭЛЕМЕНТ
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  //Сложный элемент Дата с регулятором и картинкой
  	НовыйЭлемент = Этаформа.Элементы.Вставить("эккоИсторияИзмененияSapHR",Тип("ПолеФормы"),Элементы.эккоДанныеSAPHR);
	НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
	НовыйЭлемент.Заголовок = "Заданный ниже Идентификатор действует с: ";
	НовыйЭлемент.ПутьКДанным = "эккоИдентификаторПериод";
	НовыйЭлемент.КнопкаВыбора = Истина;
	НовыйЭлемент.КнопкаРегулирования = Истина;
	НовыйЭлемент.КартинкаКнопкиВыбора = БиблиотекаКартинок.ПолеВводаКалендарь;
	НовыйЭлемент.ФорматРедактирования = "ДФ=dd.MM.yyyy";
	НовыйЭлемент.УстановитьДействие("ПриИзменении", "эккоИсторияИзмененияSapHRПриИзмененииПосле");
	НовыйЭлемент.УстановитьДействие("Регулирование", "эккоИсторияИзмененияSapHRРегулированиеПосле"); 
	НовыйЭлемент.Ширина = 14;
  
//Простой элемент 
        НовыйЭлемент = Элементы.Добавить("эккоИдентификаторSAPHRПозицииШРРуководителя", Тип("ПолеФормы"), Элементы.эккоГруппаИсторияИзмененияSapHR);
	НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
	НовыйЭлемент.ПутьКДанным = "Объект.эккоИдентификаторSAPHRПозицииШРРуководителя";
	
//ТЧ
	ТаблицаФормыВТР_ВентраГПХ = Элементы.Добавить("ВТР_ВентраГПХ", Тип("ТаблицаФормы"),ЭтотОбъект);
	ТаблицаФормыВТР_ВентраГПХ.ПутьКДанным = "Объект.ВТР_ВентраГПХ";
 
//Элемент ТЧ
        ТаблицаТовары = Элементы.Товары;
        НовыйРеквизит = Элементы.Добавить("Вес", Тип("ПолеФормы"), ТаблицаТовары);
        НовыйРеквизит.Заголовок = "Вес";
        НовыйРеквизит.Вид = ВидПоляФормы.ПолеВвода;
        НовыйРеквизит.ПутьКДанным = "Объект.Товары.Вес";
		
  //Группа
        ГруппаДатаНомер = ЭтаФорма.Элементы.Добавить("эккоГруппаИсторияИзмененияSapHR", Тип("ГруппаФормы"),Элементы.эккоДанныеSAPHR);
	ГруппаДатаНомер.Вид = ВидГруппыФормы.ОбычнаяГруппа;
	ГруппаДатаНомер.Отображение = ОтображениеОбычнойГруппы.Нет;
	ГруппаДатаНомер.ОтображатьЗаголовок = ЛОЖЬ; 
	ГруппаДатаНомер.Группировка = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяВсегда;

//Переместить или указать перед каким элементом расположить объект
	Этаформа.Элементы.Переместить(Элементы.РеквизитыБанкаИВТР_РеквизитыОтправителя, Элементы.ЭлектронныйДокументооборотСБанком, Элементы.БанковскиеКарты);
	
//КОМАНДА
	НоваяКоманда = ЭтаФорма.Команды.Добавить("эккоКомандаИсторияИзмененияSapHR");
	НоваяКоманда.Заголовок = "Общая команда";
	НоваяКоманда.Действие = "эккоКомандаИсторияИзмененияSapHRПосле";


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                	Команда и кнопка
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Кнопка не отображается на форме: 
1) Когда не установлено действие
2) Когда установлена функциональная опция у коменды и ее результат отрицательный. 
Свойство видимость и доступность независимы от функциональной опции 

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

                                                                                                        Программное открытие и взаимодействие с формой

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                Войти в обработчик события формы "ПриИзменении" (Нелегальный способ)
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Объект.Документ - ДокументСсылка(То что программно открываем и изменяет)
//Объект.Контрагент - То что хотим засунуть в программно открытую форму

&НаКлиенте
Процедура Обработать(Команда)
	
	Если НЕ ПроверитьЗаполнение() Тогда
		Возврат;
	КонецЕсли;
	//Новый Структура("Ключ", Объект.Документ) - Можно и без этого
	Форма = ОткрытьФорму("Документ.РасходнаяНакладная.Форма.ФормаДокумента", Новый Структура("Ключ", Объект.Документ));
	Форма.Объект.Контрагент = Объект.Контрагент;
	//Форма.Открыть(); - Если используется ПолучитьФорму(), то открытие перед иницализации ОБЯЗАТЕЛЬНО
	
	ИнтерактивноЗаписатьВЭлементУправления(Форма.Элементы.Контрагент, Форма.Объект.Контрагент, ЭтаФорма); //ЭтаФорма - форма обработки в модуле которой программируем открытие формы
	
	
КонецПроцедуры

// Интерактивно записывает значение в элемент управления. Интерактивность заключается в срабатывании
// события ПриИзменении у элемента управления.
//
// Параметры:
//  ЭлементУправления – ЭлементУправления – которому присваиваем значение;
//  Значение     – Произвольный – присваиваемое значение;
//  *ФормаИнициатор - Форма, УправляемаяФорма, *Неопределено - которая будет использована в качестве инициатора события;
//               если не указана, то будет создана временная форма-пустышка.
//
&НаКлиенте
Функция ИнтерактивноЗаписатьВЭлементУправления(ЭлементУправления, Знач Значение, Знач ФормаИнициатор = Неопределено)
	
	//Если ФормаИнициатор = Неопределено Тогда
	//	ФормаИнициатор = ПолучитьФорму("ОбщаяФорма.Пустышка", ЭлементУправления); 
	//Иначе
		СтарыйВладелец = ФормаИнициатор.ВладелецФормы;
		СтарыйЗакрыватьПриВыборе = ФормаИнициатор.ЗакрыватьПриВыборе;
		ФормаИнициатор.ВладелецФормы = ЭлементУправления;
		ФормаИнициатор.ЗакрыватьПриВыборе = Ложь;
	//КонецЕсли;
	НовоеЗначение = ЭлементУправления.ОграничениеТипа.ПривестиЗначение(Значение);
	Если НовоеЗначение <> Значение Или ЭлементУправления.ТолькоПросмотр Тогда
		Возврат Ложь;
	КонецЕсли; 
	ФормаИнициатор.ОповеститьОВыборе(Значение); 
	Если СтарыйЗакрыватьПриВыборе <> Неопределено Тогда
		ФормаИнициатор.ВладелецФормы = СтарыйВладелец;
		ФормаИнициатор.ЗакрыватьПриВыборе = СтарыйЗакрыватьПриВыборе;
	КонецЕсли;
	
КонецФункции

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			Не проверенный спобоб (должен работать только с экспортными функциями)
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Вызов не экспортной функции формы? ПараметрыФормы = Новый Структура("Ключ", ВыбранныйСотрудник)
Форма = ПолучитьФорму("Справочник.Сотрудники.ФормаЭлемента", ПараметрыФормы);
Форма.ЗарегистрироватьУвольнение();

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
															Запрет Редактирования
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

https://its.1c.ru/db/bsp3110doc#content:4:hdoc:issogl1_запрет_редактирования_реквизитов_объектов
Когда необходимо заброкировать всю форму, а перечислять каждое поле не целесообразно можно воспользоваться данным способом 

{ПриСозданииНаСервере

// Группа маячек, по ее доступности определяется ТолькоПросмотр у верхнеуровневых групп документов
бит_МодификацияФормСервер.ДобавитьЭлементНаФормуГруппа(Форма, Форма, "ЭтаФормаДокумента", "ЭтаФормаДокумента", ВидГруппыФормы.ОбычнаяГруппа,,,Ложь);
	
Если Форма.Объект.бит_ГотовКОтправке Тогда
	ЗапретРедактированияРеквизитовОбъектов.ЗаблокироватьРеквизиты(Форма);	
КонецЕсли;
	
ЭтаФормаДокументаДоступность = НЕ Форма.Элементы["ЭтаФормаДокумента"].Доступность;
	
Форма.Элементы.СтрокаИсправление.ТолькоПросмотр 		= ЭтаФормаДокументаДоступность;
Форма.Элементы.ГруппаСтраницы.ТолькоПросмотр 			= ЭтаФормаДокументаДоступность;
Форма.Элементы.ГруппаНазначениеПлатежа.ТолькоПросмотр 		= ЭтаФормаДокументаДоступность;
Форма.Элементы.ГруппаПодвал.ТолькоПросмотр 			= ЭтаФормаДокументаДоступность;

ПриСозданииНаСервере}

{ПослеЗаписиНаСервере

Если ТекущийОбъект.бит_ГотовКОтправке Тогда
	ЗапретРедактированияРеквизитовОбъектов.ЗаблокироватьРеквизиты(ЭтаФорма);	
КонецЕсли;
	
ЭтаФормаДокументаДоступность = НЕ Элементы["ЭтаФормаДокумента"].Доступность;
	
Элементы.СтрокаИсправление.ТолькоПросмотр 			= ЭтаФормаДокументаДоступность; 
Элементы.ГруппаСтраницы.ТолькоПросмотр 				= ЭтаФормаДокументаДоступность;
Элементы.ГруппаНазначениеПлатежа.ТолькоПросмотр 		= ЭтаФормаДокументаДоступность;
Элементы.ГруппаПодвал.ТолькоПросмотр 				= ЭтаФормаДокументаДоступность;

ПослеЗаписиНаСервере}

{МодульФормы

// [ISPolpudin@1bit.com ZOOM-19 27.08.24
&НаКлиенте
Процедура Подключаемый_РазрешитьРедактированиеРеквизитовОбъекта(Команда)
	ЗапретРедактированияРеквизитовОбъектовКлиент.РазрешитьРедактированиеРеквизитовОбъекта(ЭтотОбъект, Новый ОписаниеОповещения("ПослеВыбораРеквизитовДляРазблокирования", ЭтотОбъект));
КонецПроцедуры // ISPolpudin@1bit.com ZOOM-19 27.08.24] 

// [ISPolpudin@1bit.com ZOOM-19 27.08.24
&НаКлиенте
Процедура ПослеВыбораРеквизитовДляРазблокирования(РазблокируемыеРеквизиты, Контекст) Экспорт
	
	ЭтаФормаДокументаДоступность = НЕ Элементы["ЭтаФормаДокумента"].Доступность;
	
	Элементы.СтрокаИсправление.ТолькоПросмотр 			= ЭтаФормаДокументаДоступность; 
	Элементы.ГруппаСтраницы.ТолькоПросмотр 				= ЭтаФормаДокументаДоступность;
	Элементы.ГруппаНазначениеПлатежа.ТолькоПросмотр 		= ЭтаФормаДокументаДоступность;
	Элементы.ГруппаПодвал.ТолькоПросмотр 				= ЭтаФормаДокументаДоступность;
    
КонецПроцедуры // ISPolpudin@1bit.com ZOOM-19 27.08.24]

МодульФормы}
